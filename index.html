
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–£–≥–∞–¥–∞–π –ò–ò</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      text-align: center;
      padding: 20px;
      min-height: 100vh;
      overflow: hidden;
    }
    h1 { margin: 15px 0; font-size: 1.8em; }
    #imageContainer {
      width: 280px; height: 280px;
      margin: 20px auto;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 15px 30px rgba(0,0,0,0.3);
      background: #000;
    }
    #aiImage {
      width: 100%; height: 100%;
      object-fit: cover;
      transition: transform 0.3s;
    }
    .options {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin: 25px auto;
      max-width: 320px;
    }
    .option {
      padding: 16px;
      background: rgba(255,255,255,0.15);
      border: 2px solid transparent;
      border-radius: 16px;
      font-size: 1em;
      transition: all 0.3s;
      backdrop-filter: blur(10px);
    }
    .option.correct {
      background: #4ade80 !important;
      border-color: #22c55e;
      transform: scale(1.05);
    }
    .option.wrong {
      background: #ef4444 !important;
      border-color: #dc2626;
    }
    #score {
      font-size: 1.5em;
      margin: 15px 0;
      font-weight: bold;
    }
    #streak {
      font-size: 1.2em;
      color: #fbbf24;
    }
    .hidden { display: none; }
  </style>
</head>
<body>
  <h1>–£–ì–ê–î–ê–ô, –ß–¢–û –ù–ê–†–ò–°–û–í–ê–õ –ò–ò!</h1>
  <div id="score">–°—á—ë—Ç: 0</div>
  <div id="streak">–°–µ—Ä–∏—è: 0</div>

  <div id="imageContainer">
    <img id="aiImage" src="" alt="–ò–ò-–∫–∞—Ä—Ç–∏–Ω–∫–∞">
  </div>

  <div class="options" id="options"></div>

  <div id="result" class="hidden"></div>

  <script>
    // === –î–ê–ù–ù–´–ï –ò–ì–†–´ ===
    const prompts = [
  { text: "–∫–æ—Ç –≤ —Å–∫–∞—Ñ–∞–Ω–¥—Ä–µ –Ω–∞ –õ—É–Ω–µ", img: "https://i.imgur.com/8hA7K.jpg" },
  { text: "–ø–∏—Ü—Ü–∞ —Å –≥–ª–∞–∑–∞–º–∏ –∏ –Ω–æ–≥–∞–º–∏", img: "https://i.imgur.com/5e8vZ9k.jpg" },
  { text: "–¥–∏–Ω–æ–∑–∞–≤—Ä –Ω–∞ —Å–∞–º–æ–∫–∞—Ç–µ –≤ –æ—Ñ–∏—Å–µ", img: "https://i.imgur.com/3kL9mP2.jpg" },
  { text: "—ë–∂–∏–∫ –∏–≥—Ä–∞–µ—Ç –Ω–∞ –≥–∏—Ç–∞—Ä–µ", img: "https://i.imgur.com/7pX9qR1.jpg" },
  { text: "—Ä–æ–±–æ—Ç –ø—å—ë—Ç –∫–æ—Ñ–µ –≤ –∫–∞—Ñ–µ", img: "https://i.imgur.com/9mN2vF4.jpg" },
  { text: "–º–µ–¥–≤–µ–¥—å –≤ –∫–æ—Å—Ç—é–º–µ —Å—É–ø–µ—Ä–º–µ–Ω–∞", img: "https://i.imgur.com/1qW3eR5.jpg" }
];

    let currentRound = null;
    let score = 0;
    let streak = 0;

    const imageEl = document.getElementById('aiImage');
    const optionsEl = document.getElementById('options');
    const scoreEl = document.getElementById('score');
    const streakEl = document.getElementById('streak');

    // === –°–¢–ê–†–¢ ===
    function startGame() {
      nextRound();
      Telegram.WebApp.ready();
      Telegram.WebApp.expand();

      // –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è"
      Telegram.WebApp.MainButton.setText('–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—á—ë—Ç–æ–º');
      Telegram.WebApp.MainButton.show();
      Telegram.WebApp.MainButton.onClick(shareScore);
    }

    function nextRound() {
      currentRound = prompts[Math.floor(Math.random() * prompts.length)];
      const wrong = prompts.filter(p => p !== currentRound);
      const options = [currentRound, ...wrong.sort(() => 0.5 - Math.random()).slice(0,3)];
      options.sort(() => 0.5 - Math.random());

      imageEl.src = currentRound.img;
      optionsEl.innerHTML = '';

      options.forEach((opt, i) => {
        const btn = document.createElement('div');
        btn.className = 'option';
        btn.textContent = opt.text;
        btn.onclick = () => selectAnswer(opt, btn);
        optionsEl.appendChild(btn);
      });
    }

    function selectAnswer(selected, btn) {
      const isCorrect = selected === currentRound;
      
      // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–æ–∫
      document.querySelectorAll('.option').forEach(b => b.style.pointerEvents = 'none');

      if (isCorrect) {
        btn.classList.add('correct');
        score += 10;
        streak++;
        playSound('correct');
        Telegram.WebApp.HapticFeedback.notificationOccurred('success');
      } else {
        btn.classList.add('wrong');
        streak = 0;
        playSound('wrong');
        Telegram.WebApp.HapticFeedback.notificationOccurred('error');
      }

      updateScore();
      setTimeout(() => {
        if (isCorrect && streak % 5 === 0) {
          showBonus();
        } else {
          nextRound();
        }
      }, 1500);
    }

    function updateScore() {
      scoreEl.textContent = `–°—á—ë—Ç: ${score}`;
      streakEl.textContent = `–°–µ—Ä–∏—è: ${streak} üî•`;
    }

    function showBonus() {
      alert(`–ë–û–ù–£–°! +50 –∑–∞ —Å–µ—Ä–∏—é ${streak}!`);
      score += 50;
      updateScore();
      nextRound();
    }

    function shareScore() {
      const text = `–Ø —É–≥–∞–¥–∞–ª ${score} –ò–ò-–∫–∞—Ä—Ç–∏–Ω–æ–∫! üî•\n–°–µ—Ä–∏—è: ${streak}\n–ü–æ–±–µ–π –º–µ–Ω—è –≤ @guess_ai_game_bot!`;
      Telegram.WebApp.shareScore?.() || navigator.share?.({ text }) || alert(text);
    }

    function playSound(type) {
      const audio = new Audio();
      audio.volume = 0.3;
      if (type === 'correct') {
        audio.src = 'https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3';
      } else {
        audio.src = 'https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-383.mp3';
      }
      audio.play().catch(() => {});
    }

    // –ó–∞–ø—É—Å–∫
    startGame();
  </script>
</body>
</html>
